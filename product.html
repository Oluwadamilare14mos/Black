<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Product Detail — Black</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet" />
  <script src="https://cdn.tailwindcss.com"></script>
  <script> tailwind.config = { theme:{ extend:{ colors:{ brand:'#ff6600', accent:'#ff3300' }, fontFamily:{ poppins:['Poppins','sans-serif'] } } } }; </script>
  <style> body{font-family:Poppins, sans-serif; background:#fff; color:#111827;} .thumb{width:72px;height:72px;object-fit:cover;border-radius:8px;} .mainimg{width:100%;height:360px;object-fit:cover;border-radius:8px;} </style>
</head>
<body>

  <header class="px-6 py-4 flex items-center justify-between">
    <h1 class="text-2xl font-bold text-brand">BLACK</h1>
    <a href="index.html" class="text-sm text-gray-700">Back to shop</a>
  </header>

  <main class="max-w-4xl mx-auto px-6 py-6">
    <div id="productWrap" class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <div>
        <img id="mainImage" class="mainimg" src="" alt="product" />
        <div id="thumbs" class="flex gap-3 mt-4"></div>
      </div>
      <div>
        <h2 id="pName" class="text-2xl font-extrabold mb-2"></h2>
        <p id="pCat" class="text-sm text-gray-600 mb-3"></p>
        <p id="pPrice" class="text-3xl font-bold text-brand mb-4"></p>
        <p id="pDesc" class="text-sm text-gray-700 mb-6"></p>
        <div class="flex gap-3">
          <button id="addCartBtn" class="px-6 py-3 bg-brand text-white rounded-full">Add to Cart</button>
          <a id="openCart" href="index.html#products" class="px-4 py-3 border rounded">View products</a>
        </div>
      </div>
    </div>
  </main>

  <footer class="text-center py-6 mt-10 bg-gray-50">
    <p class="text-sm text-gray-600">&copy; 2025 Black — DamiTools</p>
  </footer>

  <script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
  import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-auth.js";

  const firebaseConfig = {
    apiKey: "AIzaSyDsrL5UHWeFtQAX5XCI1hX7As91PWz59Cs",
    authDomain: "black-1108.firebaseapp.com",
    projectId: "black-1108",
    storageBucket: "black-1108.firebasestorage.app",
    messagingSenderId: "639439190327",
    appId: "1:639439190327:web:b08b640aba7e8f7d76c2b2",
    measurementId: "G-6T8NZV9YB9"
  };
  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);

  // Use same deterministic generator as index
  const categories = [
    "Men wears","Women wears","Kids wears","Wristwatch","Shoe","Women Heels",
    "Chain","Ring","Boxer","Underwears","Bet","Round neck","Jugers","Bedsheets",
    "Pilot","Wall Cutting","Accessories","Hats","Bags","Socks","Jackets"
  ];
  const sampleAdjectives = ["Classic","Modern","Stylish","Comfort","Premium","Urban","Luxury","Casual","Elite","Cozy"];
  const sampleItems = ["Polo Shirt","Summer Dress","Sneakers","Red Heels","Chain Necklace","Gold Ring","Boxer Briefs","Underwear Set","Round Neck Tee","Jumper","Bedsheet Set","Pilot Cap","Wall Cutter","Leather Jacket","Socks Pack"];
  function rand(min,max){ return Math.floor(Math.random()*(max-min+1))+min; }

  // recreate product by id
  function makeProduct(i){
    const cat = categories[i % categories.length];
    const name = `${sampleAdjectives[i % sampleAdjectives.length]} ${sampleItems[i % sampleItems.length]} ${i}`;
    const priceVal = rand(2500,85000);
    const price = '#' + priceVal.toLocaleString();
    const img = `https://picsum.photos/seed/prod${i}/900/900`;
    const imgs = [
      `https://picsum.photos/seed/prod${i}a/900/900`,
      `https://picsum.photos/seed/prod${i}b/900/900`,
      `https://picsum.photos/seed/prod${i}c/900/900`
    ];
    return { id:i, name, category:cat, priceVal, price, img, imgs, description: `High-quality ${cat} — ${name}. Perfect for everyday wear and special occasions.` };
  }

  // read id
  const params = new URLSearchParams(location.search);
  const id = Number(params.get('id')) || 1;
  const product = makeProduct(id);

  // render
  document.getElementById('mainImage').src = product.img;
  document.getElementById('pName').textContent = product.name;
  document.getElementById('pCat').textContent = product.category;
  document.getElementById('pPrice').textContent = product.price;
  document.getElementById('pDesc').textContent = product.description;
  const thumbs = document.getElementById('thumbs');
  product.imgs.forEach(src=>{
    const im = document.createElement('img');
    im.src = src; im.className='thumb'; im.onclick = ()=> document.getElementById('mainImage').src = src;
    thumbs.appendChild(im);
  });

  // Add to cart requires login (redirect if not)
  let cartCount = 0;
  document.getElementById('addCartBtn').addEventListener('click', ()=> {
    const user = auth.currentUser;
    if (!user) { window.location.href = 'login.html'; return; }
    cartCount++;
    alert('Added to cart');
    // optionally persist cart in Firestore
  });

  // show profile if logged in (optional)
  onAuthStateChanged(auth, (user) => {
    // nothing visual required here
  });
  </script>
</body>
</html>
